# Allow access only through XMLHttpRequest (AJAX)
<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # Allow access from localhost for development
    RewriteCond %{HTTP_REFERER} ^https?://localhost [NC,OR]
    RewriteCond %{HTTP_REFERER} ^https?://127\.0\.0\.1 [NC,OR]
    RewriteCond %{HTTP_REFERER} ^https?://soumo-git-hub\.github\.io [NC]
    RewriteRule .* - [L]
    
    # Block direct access (when accessed directly in browser)
    RewriteCond %{HTTP_USER_AGENT} ^Mozilla.*$
    RewriteCond %{HTTP_ACCEPT} !application/json
    RewriteCond %{HTTP_X_REQUESTED_WITH} !XMLHttpRequest
    RewriteRule .* - [F,L]
</IfModule>

# Set proper headers for PDF files
<Files "*.pdf">
    Header set Content-Disposition "attachment"
</Files>